{"version":3,"sources":["webpack:///./node_modules/react-use/esm/useEffectOnce.js","webpack:///./node_modules/react-use/esm/useMount.js","webpack:///./node_modules/react-use/esm/useInterval.js","webpack:///./src/hooks/useType.ts","webpack:///./src/hooks/useTypeSentence.ts","webpack:///./src/components/templates/IndexTemplate.tsx","webpack:///./src/pages/index.tsx"],"names":["effect","fn","callback","delay","savedCallback","current","interval_1","setInterval","clearInterval","useType","text","wait","useState","count","setCount","_wait","setWait","finished","length","useEffect","useInterval","split","slice","join","start","IndexTemplate","sentence","types","map","useMount","finishCount","filter","type","handler","setTimeout","clearTimeout","every","useTypeSentence","viewed","localStorage","Boolean","getItem","scene","setScene","sceneHandler","viewedHandler","setItem","Container","center","TextBox","index","Text","key","animate","height","overflow","display","alignItems","flexDirection","justifyContent","fontSize","textAlign","animation","keyframes","RootPage"],"mappings":"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","file":"component---src-pages-index-tsx-e0815fd46400838d0a7f.js","sourcesContent":["import { useEffect } from 'react';\n\nvar useEffectOnce = function useEffectOnce(effect) {\n  useEffect(effect, []);\n};\n\nexport default useEffectOnce;","import useEffectOnce from './useEffectOnce';\n\nvar useMount = function useMount(fn) {\n  useEffectOnce(function () {\n    fn();\n  });\n};\n\nexport default useMount;","import { useEffect, useRef } from 'react';\n\nvar useInterval = function useInterval(callback, delay) {\n  var savedCallback = useRef(function () {});\n  useEffect(function () {\n    savedCallback.current = callback;\n  });\n  useEffect(function () {\n    if (delay !== null) {\n      var interval_1 = setInterval(function () {\n        return savedCallback.current();\n      }, delay || 0);\n      return function () {\n        return clearInterval(interval_1);\n      };\n    }\n\n    return undefined;\n  }, [delay]);\n};\n\nexport default useInterval;","import { useEffect, useState } from \"react\"\nimport { useInterval, useMount } from \"react-use\"\n\n\n\nexport const useType = (text: string, wait: boolean = false,\n                        delay: number = 50): { text: string, finished: boolean, start: () => void } => {\n  const [count, setCount] = useState(0)\n  const [_wait, setWait] = useState(wait)\n  const finished = count >= text.length\n\n  useEffect(() => {setWait(wait)}, [wait])\n  useInterval(() => {\n    !_wait && !finished && setCount(count + 1)\n  }, delay)\n\n  return {\n    text: text.split(\"\").slice(0, count).join(\"\"),\n    finished,\n    start: () => setWait(false)\n  }\n}\n","import { useEffect, useState } from \"react\"\nimport { useMount } from \"react-use\"\nimport { useType } from \"./useType\"\n\nexport const useTypeSentence = (sentence: string[], delay: number = 50) => {\n  const types = sentence.map(text => useType(text, true, delay))\n  const [count, setCount] = useState(0)\n\n  useMount(() => {\n    types[0]?.start()\n  })\n  const finishCount = types.filter(type => type.finished).length\n  useEffect(() => {\n    if (finishCount === 0) return\n    const current = count + 1\n    setCount(current)\n    const handler = setTimeout(() => types[current]?.start(), 1000)\n    return () => {\n      clearTimeout(handler)\n    }\n  },[finishCount])\n\n  return {\n    sentence: types.map(({text}) => text).filter(text => text),\n    finished: types.every(type => type.finished)\n  }\n}\n","import { keyframes } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport { useTypeSentence } from \"../../hooks/useTypeSentence\";\nimport { Backboard } from \"../atoms\";\nimport { Room } from \"../organisms\";\n\nexport const IndexTemplate: FC = () => {\n  const { sentence, finished } = useTypeSentence([\n    \"Hi people :)\",\n    \"Welcome to a certain lazy programmer's site X)\"\n  ]);\n  const viewed = typeof localStorage !== 'undefined'\n    ? Boolean(localStorage.getItem(\"INDEX_VIEWED\"))\n    : true;\n  const [scene, setScene] = useState<number>(viewed ? 1 : 0);\n\n  useEffect(() => {\n    if (scene === 0 && finished) {\n      const sceneHandler = setTimeout(() => {\n        setScene(scene + 1);\n      }, 1500);\n      const viewedHandler = setTimeout(() => {\n        localStorage.setItem(\"INDEX_VIEWED\", \"true\");\n      }, 1500);\n      return () => {\n        clearTimeout(sceneHandler);\n        clearTimeout(viewedHandler);\n      };\n    }\n    return () => {};\n  }, [finished, scene]);\n\n  return <Backboard>\n    <Container center={scene === 0}>\n      {\n        scene === 0\n          ? <TextBox finished={finished}>\n            {sentence.map((text, index) => <Text key={index}>{text}</Text>)}\n          </TextBox>\n          : <Room animate={!viewed}/>\n      }\n    </Container>\n  </Backboard>;\n};\n\nconst Container = styled.div<{ center: boolean }>(({ center }) => ({\n  height: \"100vh\",\n  overflow: \"hidden\",\n  display: \"flex\",\n  alignItems: \"center\",\n  flexDirection: \"column\",\n  justifyContent: center ? \"center\" : \"start\",\n  fontSize: \"calc(10px + 2vmin)\"\n}));\n\nconst TextBox = styled.div<{ finished: boolean }>(({ finished }) => ({\n  textAlign: \"center\",\n  animation: finished ? `${animation} 2s forwards` : \"unset\"\n}));\n\nconst animation = keyframes`\n0% {\n  transform: translateX(0);\n}\n\n30% {\n  transform: translateX(0);\n}\n\n100% {\n transform: translateX(-100vw);\n}\n`;\n\nconst Text = styled.p`\nmargin: 0.2em;\nfont-size: 1.5em;\n`;\n","import { graphql } from \"gatsby\";\nimport React, { FC } from \"react\";\nimport { IndexTemplate } from \"../components/templates/IndexTemplate\";\nimport SEO from \"../metas/seo\";\n\nconst RootPage: FC = () => <>\n  <SEO/>\n  <IndexTemplate/>\n</>;\n\nexport default RootPage;\n\nconst query = graphql`query {\n  file(relativePath: { eq: \"blog/avatars/kyle-mathews.jpeg\" }) {\n    childImageSharp {\n      fixed(width: 125, height: 125) {\n        ...GatsbyImageSharpFixed\n      }\n    }\n  }\n}`;\n\n"],"sourceRoot":""}